---
title: "Airline Delay Prediction Proposal"
author: "Logistics Transport Aviation"
subtitle: "1423543"
date: "30/08/2021"
output:
  html_document:
  number_sections: yes
fig_caption: yes
toc: yes
toc_depth: '2' 
---
  
```{r setup, include=FALSE}
## knitr::opts_chunk$set(echo = TRUE)
## install.packages("kableExtra")
library(tidyverse)
library(kableExtra)
```

## Airline Delay Prediction

Aircraft delays have serious economic impacts that represent a logistical headache for airlines, airports, airline crew, and passengers alike. In a 2010 study by the National Center of Excellence For Aviation Operations Research, an estimated 31.2 billion US dollars was lost due to direct and indirect costs of airline delays in the United States for 2007. These expenses included maintenance costs, extra paid hours for flight crew, the extra use of fuel, and airport fees. As an example, airlines have dedicated time slots at airport gates and unexpected delays exceeding the expected time slot can cost thousands of dollars by the minute.

Many factors can contribute to aircraft delays. These may include unavoidable reasons such as inclement weather, unforeseen aircraft mechanical breakdowns, or a multitude of passenger-related incidents. Airline delays then create complicated scenarios for airline schedulers as a delay for one aircraft may impact the flight schedule for all consecutive flights using that aircraft. Passengers with connecting flights may need to be ticketed on other flights, reserve flight crew may need to be called if the current flight crew are going to exceed their flight hours, and delays may continue to have a snowball effect on later flights causing them to also be delayed (Ball, 2010).

Thus, understanding the impact of these variables on aircraft on-time performance can help elucidate ways and methods to mitigate these airline delays. By doing so, steps can be made to reduce airline costs associated with these delays. We identify the primary stakeholders to be investors and shareholders for the financial performance of the airline. In addition, airline passengers are important stakeholders as delays negatively influence repurchase intentions and sentiment across word-of-mouth (Kim, 2016).

Herein, we propose an exploratory analysis and prediction model on airline delays utilizing data from the United States in 2019.

<<<<<<< HEAD
## Stakeholders

Throughout the project, we'll need to manage our external and internal stakeholders in our data science project.

text_tbl <- data.frame(
  Items = c("Item 1", "Item 2", "Item 3"),
  Features = c(
    "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin vehicula tempor ex. Morbi malesuada sagittis turpis, at venenatis nisl luctus a. ",
    "In eu urna at magna luctus rhoncus quis in nisl. Fusce in velit varius, posuere risus et, cursus augue. Duis eleifend aliquam ante, a aliquet ex tincidunt in. ", 
    "Vivamus venenatis egestas eros ut tempus. Vivamus id est nisi. Aliquam molestie erat et sollicitudin venenatis. In ac lacus at velit scelerisque mattis. "
  )
)

kbl(text_tbl) %>%
  kable_paper(full_width = F) %>%
  column_spec(1, bold = T, border_right = T) %>%
  column_spec(2, width = "30em", background = "yellow")

## Datasets

Main dataset is from The United States Department of Transportation, it is a comprehensive dataset with delay time, reasons for delays, airline code, origin and destination airport code. To improve the readibility of the dataset, we included a lookup table that has information on airline codes and airline names. Furthermore, the airport name corresponding to airport codes are retrieved through API, then it is merged to the main dataset. More datasets, such as Skytrax Airline review which records sentiment will be considered and might be used for merging in later stages. 

## Regression modelling techniques

choosing the right visualisation is critical in explaining your analysis as visualisation is a translation on data and how it’s being portrayed.
These are determined based on what your goal is. However, most are determined by two categories.
•	Categorical
•	Numerical

## Impact analysis

In all Gplot cases in ggplot2 package. There's a image in which shows all the capabilities in R, however with this being in mind however I will be showing you the most common graphs used to help visualise using the Medal dataset.

The most important thing you need to change for the users to understand are the following
• Colours
• Parameters
• Title
• Dataset you're using

```{r add_picture, echo=FALSE}
knitr::include_graphics("ggplot2.png")
knitr::include_graphics("ggplot2_1.png")
```


# Conclusion/Summary

In conclusion, there’s a lot of data visualisation involved, and the way people can manipulate data. The most critical objective is making sure you know what you are analysing to produce the most appropriate graphs. 
As you can see, I had to adjust in using different datasets to demonstrate the basic graphs at full capability with appropriate analysis. If I did the metal dataset for boxplots, the information shown would not be as appropriate and vise versa with diamonds set with just numerical scatter plots.

# References

Ball, M. (2010, November). Total Delay Impact Study A Comprehensive Assessment of the Costs and Impacts of Flight Delay in the United States. https://isr.umd.edu/NEXTOR/pubs/TDI_Report_Final_11_03_10.pdf

Berkay, A. (2021, August 13). Tokyo 2020 Olympics Medals Dataset. Retrieved from Kaggle: https://www.kaggle.com/berkayalan/2021-olympics-medals-in-tokyo

Holtz, Y., & Healy, C. (2021, August 13). Data to Viz. Retrieved from Data to Viz: https://www.data-to-viz.com/

Kim, N. Y., & Park, J. W. (2016). A study on the impact of airline service delays on emotional reactions and customer behavior. Journal of Air Transport Management, 57, 19–25. https://doi.org/10.1016/j.jairtraman.2016.07.005

Project, R. (2021, August 13). devtools. Retrieved from R Project: https://www.r-project.org/nosvn/pandoc/devtools.html

Studio, R. (2021, August 13). Tidyverse packages. Retrieved from Tidyverse: https://www.tidyverse.org/packages/

# Appendex

```{r add_packages, message=FALSE, warning=FALSE}
  library(psych)
  library(devtools)

  library(tidyverse)
  library(dplyr)
  library(ggplot2)
  library(Amelia)

  library(knitr)
  library(kfigr)
```
=======

API call 
```{r}
library(httr)
library(jsonlite)
library(dplyr)

icao <- GET(
  url = 'https://applications.icao.int/dataservices/api/safety-characteristics-list?api_key=8d00ef90-0982-11ec-9d72-8160549d64ab&airports=&states=USA'
)
response <- content(icao, 'parsed')
API_data <- fromJSON(response)

#Only pick those columns that are useful later on 
API_data <- API_data %>% select(airportCode, airportName)
```
On time data 
```{r}
ontime_raw <- read.csv("https://raw.githubusercontent.com/charlottetse33/36103_Logistics-Transport-Aviation/main/test%20on%20time%20report.csv")
```
Airline DOT_ID correspond to airline name data
```{r}
#Seperate loading data to prevent R from crashing
id_airline <- read.csv("https://raw.githubusercontent.com/charlottetse33/36103_Logistics-Transport-Aviation/main/dot_id_airline.csv")

```
Add actual airline names to on time dataset 
```{r}
colnames(id_airline) <- c("DOT_ID_Reporting_Airline", "Airline")
  
ontime_1 <- left_join(ontime_raw, id_airline, by = "DOT_ID_Reporting_Airline")

```
Add API Airport name 
```{r}
ontime_2 <- ontime_1 %>% mutate(Origin_airportCode = paste("K",Origin, sep = ""), Dest_airportCode = paste("K",Dest, sep = ""))

Originjoint <- left_join(ontime_2, API_data, by = c("Origin_airportCode" = "airportCode"))
names(Originjoint)[names(Originjoint) == "airportName"] <- "Origin_airportName"

ontime_final <- left_join(Originjoint, API_data, by = c("Dest_airportCode" = "airportCode"))
names(ontime_final)[names(ontime_final) == "airportName"] <- "Dest_airportName"


#New column names from merging data: 
#Airline, Origin_airportName, Dest_airportName

```

